//------------Sonic CD Hotaru2 Script-------------//
//--------Scripted by Christian Whitehead 'The Taxman'--------//
//-------Unpacked By Rubberduckycooly's Script Unpacker-------//

// Aliases
#alias 66: TYPE_HOTARU2

// Function declarations
#function EggMobile_Function57
#function EggMobile_Function58
#function EggMobile_Function59
#function EggMobile_Function60
#function EggMobile_Function61
#function EggMobile_Function62
#function EggMobile_Function63
#function EggMobile_Function64
#function EggMobile_Function65
#function EggMobile_Function66
#function EggMobile_Function67
#function EggMobile_Function68
#function EggMobile_Function69
#function EggMobile_Function70
#function EggMobile_Function71
#function EggMobile_Function72
#function EggMobile_Function73
#function EggMobile_Function74
#function EggMobile_Function75
#function EggMobile_Function76
#function EggMobile_Function77
#function EggMobile_Function78
#function EggMobile_Function79
#function EggMobile_Function80
#function EggMobile_Function81
#function EggMobile_Function82
#function EggMobile_Function83
#function EggMobile_Function84
#function EggMobile_Function85
#function EggMobile_Function86
#function EggMobile_Function87
#function BossWing_Function87
#function EggMobile_Function56

function EggMobile_Function57
	Object.Value0++
	if Object.Value0 == Object[+2].Value1
		Object.Value0=0
		Object[+1].Value3=0
	end if
endfunction


function EggMobile_Function58
	Object.XPos -= Object.Value1
	if Object.XPos <= Object[+1].Value4
		Object[+1].Value3=0
	end if
endfunction


function EggMobile_Function59
	Object.XPos += Object.Value1
	if Object.XPos >= Object[+1].Value5
		Object[+1].Value3=0
	end if
endfunction


function EggMobile_Function60
	Object.YPos -= Object.Value2
	if Object.YPos <= Object[+1].Value7
		Object.YPos=Object[+1].Value7
		Object[+1].Value3=0
	end if
endfunction


function EggMobile_Function61
	Object.YPos += Object.Value2
	if Object.YPos >= Object[+1].Value7
		Object.YPos=Object[+1].Value7
		Object[+1].Value3=0
	end if
	if Object.Value6!=0
		if Object[+1].Value0<4
			TempValue0=Object.Value3
			TempValue0 >>= 6
			if TempValue0 == Object[+2].Value4
				Object.Value6=0
				Object.Value3=TempValue0
				Object.Value3 <<= 6
			end if
		else
			TempValue0=Object.Value3
			TempValue0%=1280
			if TempValue0 == 0
				Object.Value6=0
			end if
		end if
	end if
endfunction


function EggMobile_Function62
	Object.XPos -= Object.Value1
	if Object.XPos <= Object[+1].Value6
		Object.XPos=Object[+1].Value6
		Object[+1].Value3=0
	end if
endfunction


function EggMobile_Function63
	Object.XPos += Object.Value1
	if Object.XPos >= Object[+1].Value6
		Object.XPos=Object[+1].Value6
		Object[+1].Value3=0
	end if
endfunction


function EggMobile_Function64
	Object.XPos -= 85196
	if Object.XPos <= Object[+1].Value7
		Object.XPos=Object[+1].Value7
		Object.Value6=0
		Object[+1].Value3=0
	end if
	TempValue0=Object.Rotation
	TempValue0 <<= 1
	TempValue0&=511
	Sin(TempValue1,TempValue0)
	if TempValue1<0
		FlipSign(TempValue1)
	end if
	TempValue1 >>= 7
	TempValue1 += 64
	ObjectTileGrip(0,0,TempValue1,0)
endfunction


function EggMobile_Function65
	Object.XPos += 85196
	if Object.XPos >= Object[+1].Value7
		Object.XPos=Object[+1].Value7
		Object.Value6=0
		Object[+1].Value3=0
	end if
	TempValue0=Object.Rotation
	TempValue0 <<= 1
	TempValue0&=511
	Sin(TempValue1,TempValue0)
	if TempValue1<0
		FlipSign(TempValue1)
	end if
	TempValue1 >>= 7
	TempValue1 += 64
	ObjectTileGrip(0,0,TempValue1,0)
endfunction


function EggMobile_Function66
	switch Object[+2].Value0
	case 0
		Object.Value0++
		if Object.Value0 == 20
			Object.Value0=0
			Object[+2].Value0++
		end if
		break
	case 1
		if Object.Value6!=0
			TempValue0=Object.Value3
			TempValue0 >>= 7
			if TempValue0 == 0
				TempValue0 <<= 7
				Object.Value3=TempValue0
				Object.Value6=0
				Object[+2].Value0++
			end if
		end if
		break
	case 2
		Object.Value0++
		Object.Value4 += 128
		if Object.Value0 == 22
			Object[-4].Frame=1
			Object[-3].Frame=1
			Object[-2].Frame=1
			Object[-1].Frame=1
		end if
		if Object.Value0 == 26
			Object[-4].Frame=2
			Object[-3].Frame=2
			Object[-2].Frame=2
			Object[-1].Frame=2
		end if
		if Object.Value0 == 36
			Object.Value0=0
			Object[+2].Value0++
		end if
		break
	case 3
		Object.Value0++
		if Object.Value0 == 10
			Object.Value0=0
			Object[+2].Value0++
			Object.Value6=-64
			Object[+1].Value7=Object[+3].YPos
			Object[+1].Value7 -= 4456448
		end if
		break
	case 4
		TempValue0=0
		ArrayPos0=Object.EntityNo
		ArrayPos0 -= 4
		while TempValue0<4
			if Object[ArrayPos0].Value5 == 1
				TempValue0=Object[ArrayPos0].Rotation
				TempValue0 >>= 4
				if TempValue0 == 0
					Object[ArrayPos0].Rotation=0
					Object[ArrayPos0].Value5=0
					Object[ArrayPos0].State=1
					Object[ArrayPos0].Value2=0x28000
				end if
			end if
			ArrayPos0++
			TempValue0++
		loop
		if Object.YPos <= Object[+1].Value7
			Object.YPos=Object[+1].Value7
			Object.Value0++
			if Object.Value0 == 60
				Object.Value0=0
				Object.Value6=0
				Object.Value3=0
				Object[+1].Value3=0
			end if
		else
			Object.YPos -= 0x14000
		end if
		break
	end switch
endfunction


function EggMobile_Function67
	if Object[+2].Value2<Object[+1].Value0
		if Object.Value0 == 0
			ArrayPos0=Object.EntityNo
			ArrayPos0 -= 4
			ArrayPos0 += Object[+2].Value2
			Object[ArrayPos0].Type=TypeName[BossWing]
			Object[ArrayPos0].State=2
			Object[ArrayPos0].Rotation=0
			Object[ArrayPos0].Value0=0
			if Object[+1].Value0>2
				Object[ArrayPos0].Frame=4
			else
				Object[ArrayPos0].Frame=3
			end if
			Object[ArrayPos0].YPos=Object[+3].YPos
			Object[ArrayPos0].YPos -= 0x800000
			Object[ArrayPos0].Value1=0
			Object[ArrayPos0].Value2=229376
			switch Object[+2].Value3
			case 0
				Object[ArrayPos0].XPos=-0x400000
				break
			case 1
				Object[ArrayPos0].XPos=0x400000
				break
			case 2
				Object[ArrayPos0].XPos=0x800000
				break
			case 3
				Object[ArrayPos0].XPos=-0x800000
				break
			case 4
				Object[ArrayPos0].XPos=-0x800000
				break
			case 5
				Object[ArrayPos0].XPos=-0x400000
				break
			case 6
				Object[ArrayPos0].XPos=0
				break
			case 7
				Object[ArrayPos0].XPos=0x400000
				break
			case 8
				Object[ArrayPos0].XPos=0x800000
				break
			case 9
				Object[ArrayPos0].XPos=0x400000
				break
			case 10
				Object[ArrayPos0].XPos=0
				break
			case 11
				Object[ArrayPos0].XPos=-0x800000
				break
			case 12
				Object[ArrayPos0].XPos=-0x500000
				break
			case 13
				Object[ArrayPos0].XPos=0x500000
				break
			case 14
				Object[ArrayPos0].XPos=-0x300000
				break
			case 15
				Object[ArrayPos0].XPos=0xA0000
				break
			end switch
			Object[ArrayPos0].XPos += Object[+3].XPos
			Object.Value0++
		else
			if Object.Value0<30
				Object.Value0++
			else
				Object.Value0=0
				Object[+2].Value2++
				Object[+2].Value3++
			end if
		end if
	else
		if Object[-4].Type == TypeName[BlankObject]
			if Object[-3].Type == TypeName[BlankObject]
				if Object[-2].Type == TypeName[BlankObject]
					if Object[-1].Type == TypeName[BlankObject]
						Object[+1].Value3=0
					end if
				end if
			end if
		end if
	end if
endfunction


function EggMobile_Function68
	if Object[+2].Value2<1
		Object[-1].Type=TypeName[BossWing]
		Object[-1].State=2
		Object[-1].Value0=0
		Object[-1].Frame=3
		if Player.XPos<Object[+3].XPos
			Object[-1].YPos=Object[+3].iXPos
			Object[-1].YPos += 248
			TempValue0=Player.XPos
			TempValue0 >>= 16
			Object[-1].YPos -= TempValue0
			Object[-1].YPos *= -27146
			Object[-1].YPos >>= 16
			Object[-1].YPos&=65535
			Object[-1].YPos <<= 16
			Object[-1].YPos += Object[+3].YPos
			Object[-1].YPos += 0x600000
			Object[-1].XPos=Object[+3].XPos
			Object[-1].XPos += 13107200
			Object[-1].Rotation=96
			Object[-1].Value1=-211898
			Object[-1].Value2=87759
		else
			Object[-1].YPos=Player.XPos
			Object[-1].YPos >>= 16
			TempValue0=Object[+3].iXPos
			TempValue0 -= 248
			Object[-1].YPos -= TempValue0
			Object[-1].YPos *= -27146
			Object[-1].YPos >>= 16
			Object[-1].YPos&=65535
			Object[-1].YPos <<= 16
			Object[-1].YPos += Object[+3].YPos
			Object[-1].YPos += 0x600000
			Object[-1].XPos=Object[+3].XPos
			Object[-1].XPos -= 13107200
			Object[-1].Rotation=416
			Object[-1].Value1=211898
			Object[-1].Value2=87759
		end if
		Object[+2].Value2++
	else
		if Object[-4].Type == TypeName[BlankObject]
			if Object[-3].Type == TypeName[BlankObject]
				if Object[-2].Type == TypeName[BlankObject]
					if Object[-1].Type == TypeName[BlankObject]
						Object[+1].Value3=0
					end if
				end if
			end if
		end if
	end if
endfunction


function EggMobile_Function69
	if Object.Value0 == 0
		switch Object[+1].Value0
		case 1
			Object[-2].Type=TypeName[BossWing]
			Object[-2].Frame=0
			Object[-2].Value5=1
			break
		case 2
			Object[-2].Type=TypeName[BossWing]
			Object[-2].Frame=0
			Object[-2].Value5=1
			Object[-1].Type=TypeName[BossWing]
			Object[-1].Frame=0
			Object[-1].Value5=1
			break
		case 3
			Object[-3].Type=TypeName[BossWing]
			Object[-3].Frame=0
			Object[-3].Value5=1
			Object[-2].Type=TypeName[BossWing]
			Object[-2].Frame=0
			Object[-2].Value5=1
			Object[-1].Type=TypeName[BossWing]
			Object[-1].Frame=0
			Object[-1].Value5=1
			break
		case 4
			Object[-4].Type=TypeName[BossWing]
			Object[-4].Frame=0
			Object[-4].Value5=1
			Object[-3].Type=TypeName[BossWing]
			Object[-3].Frame=0
			Object[-3].Value5=1
			Object[-2].Type=TypeName[BossWing]
			Object[-2].Frame=0
			Object[-2].Value5=1
			Object[-1].Type=TypeName[BossWing]
			Object[-1].Frame=0
			Object[-1].Value5=1
			break
		end switch
		Object.Value4=0
		Object.Value0++
	else
		Object.Value0++
		if Object.Value0<120
			Object.Value4 += 112
			if Object.Value4 >= 0x1000
				Object.Value4=0x1000
			end if
		else
			Object.Value0=0
			Object[+1].Value3=0
		end if
	end if
endfunction


function EggMobile_Function70
	Object.Value1=Player.XPos
	Object.Value1 -= Object.XPos
	Object.Value1 >>= 16
	TempValue0=Object.Value1
	if TempValue0<0
		FlipSign(TempValue0)
	end if
	if TempValue0<64
		Object.Value1 <<= 4
		Object.Value1 /= 90
		Object.Value1 <<= 12
		Object.Value2=Object[+3].YPos
		Object.Value2 -= 0x40000
		Object[+1].Value7=Object.Value2
		Object.Value2 -= Object.YPos
		Object.Value2 >>= 16
		Object.Value2 <<= 4
		Object.Value2 /= 90
		Object.Value2 <<= 12
		if Object[+1].Value0 == 2
			Object[+2].Value4=4480
		else
			Object[+2].Value4=3840
		end if
	else
		if Object.Value1 >= 0
			Object.Value1 -= 16
		else
			Object.Value1 += 16
		end if
		Object.Value1 <<= 4
		Object.Value1 /= 90
		Object.Value1 <<= 12
		Object.Value2=Object[+3].YPos
		Object.Value2 += 0xA0000
		Object[+1].Value7=Object.Value2
		Object.Value2 -= Object.YPos
		Object.Value2 >>= 16
		Object.Value2 <<= 4
		Object.Value2 /= 90
		Object.Value2 <<= 12
		if Object[+1].Value0 == 2
			Object[+2].Value4=4480
		else
			Object[+2].Value4=3200
		end if
	end if
endfunction


function EggMobile_Function71
	Object.XPos += Object.Value1
	Object.YPos += Object.Value2
	if Object.Value0>10
		if Object.Value3 == Object[+2].Value4
			Object.Value6=0
		end if
	else
		Object.Value0++
	end if
	if Object.YPos >= Object[+1].Value7
		Object.Value0=0
		Object.YPos=Object[+1].Value7
		Object[+1].Value7=Object[+3].YPos
		Object[+1].Value7 -= 4456448
		FlipSign(Object.Value1)
		FlipSign(Object.Value2)
		Object[+1].Value3=0
		PlayStageSfx(9,0)
	end if
endfunction


function EggMobile_Function72
	Object.Value4 += 288
	if Object.Value4>0x2200
		Object.Value4=0x2200
	end if
	Object.Value0++
	if Object.Value0 == 120
		Object.Value0=0
		Object[+1].Value3=0
	end if
endfunction


function EggMobile_Function73
	Object.XPos += Object.Value1
	Object.YPos += Object.Value2
	Object.Value4 -= 128
	if Object.Value4<0x1000
		Object.Value4=0x1000
	end if
	if Object.YPos <= Object[+1].Value7
		Object.YPos=Object[+1].Value7
		Object[+1].Value3=0
	end if
endfunction


function EggMobile_Function74
	Object.Value4 -= 128
	if Object.Value4<0x1000
		Object.Value4=0x1000
	end if
	Object.YPos -= Object.Value2
	TempValue0=Object[+3].YPos
	TempValue0 -= 4456448
	if Object.YPos <= TempValue0
		Object.YPos=TempValue0
		Object[+1].Value3=0
	end if
endfunction


function EggMobile_Function75
	if Object.Value0<20
		Object.Value0++
	else
		TempValue0=Object.Value3
		TempValue0 >>= 7
		if TempValue0 == 0
			Object.Value0=0
			Object[-2].Rotation=256
			Object.Value3=0
			Object.Value6=0
			Object[+1].Value3=0
		end if
	end if
endfunction


function EggMobile_Function76
	TempValue0=Object.Value0
	TempValue0 <<= 8
	TempValue0 /= 60
	Sin(Object.YPos,TempValue0)
	Object.YPos *= -12800
	Object.YPos += Object[+3].YPos
	Object.YPos += 0x200000
	Object.Value0++
	if Object.Value0>29
		Object.Value0=0
		Object.YPos=Object[+3].YPos
		Object.YPos -= 4456448
		Object[+1].Value3=0
	end if
endfunction


function EggMobile_Function77
	TempValue0=Object.Value0
	TempValue0 += 30
	TempValue0 <<= 8
	TempValue0 /= 60
	Sin(Object.YPos,TempValue0)
	Object.YPos *= -12800
	Object.YPos += Object[+3].YPos
	Object.YPos += 0x200000
	Object.Value0++
	if Object.Value0>29
		Object.Value0=0
		Object[+1].Value3=0
		PlayStageSfx(8,0)
	end if
endfunction


function EggMobile_Function78
	TempValue0=Object.Value0
	TempValue0 <<= 8
	TempValue0 /= 60
	Cos(Object.XPos,TempValue0)
	Object.XPos *= 5248
	Object.XPos += Object[+1].Value7
	Sin(Object.YPos,TempValue0)
	Object.YPos *= -13312
	Object.YPos += Object[+3].YPos
	Object.YPos += 0x200000
	TempValue0=Object[+3].YPos
	TempValue0 += 0x200000
	TempValue0 -= Object.YPos
	TempValue0 >>= 9
	Object.Value4=0x1000
	Object.Value4 += TempValue0
	if Object.Value4>0x2200
		Object.Value4=0x2200
	end if
	Object.Value0++
	if Object.Value0>59
		Object.Value0=0
		Object[+1].Value3=0
		PlayStageSfx(8,0)
	end if
endfunction


function EggMobile_Function79
	TempValue0=Object.Value0
	TempValue0 <<= 8
	TempValue0 /= 60
	Cos(Object.XPos,TempValue0)
	Object.XPos *= -5248
	Object.XPos += Object[+1].Value7
	Sin(Object.YPos,TempValue0)
	Object.YPos *= -13312
	Object.YPos += Object[+3].YPos
	Object.YPos += 0x200000
	TempValue0=Object[+3].YPos
	TempValue0 += 0x200000
	TempValue0 -= Object.YPos
	TempValue0 >>= 9
	Object.Value4=0x1000
	Object.Value4 += TempValue0
	if Object.Value4>0x2200
		Object.Value4=0x2200
	end if
	Object.Value0++
	if Object.Value0>59
		Object.Value0=0
		Object[+1].Value3=0
		PlayStageSfx(8,0)
	end if
endfunction


function EggMobile_Function80
	switch Object[+1].Value2
	case 0
		Object.State=56
		Object[+2].Value1=120
		Object[+2].State=1
		break
	case 1
		Object.State=58
		Object.Value6=-64
		Object.Value1=90112
		Object[+2].State=1
		break
	case 2
		Object.State=57
		break
	case 3
		Object.State=62
		break
	case 4
		Object.State=60
		Object.Value2=0xA000
		Object[+1].Value7=Object[+3].YPos
		Object[+1].Value7 += 0x200000
		Object[+2].State=0
		break
	case 5
		Object.State=56
		Object[+2].Value1=20
		break
	case 6
		if Player.XPos>Object.XPos
			Object.Direction=FACING_LEFT
			Object.State=64
			Object[+1].Value7=Object[+1].Value6
			Object[+1].Value7 += 0x680000
			Object.Value6=16
		else
			Object.Direction=FACING_RIGHT
			Object.State=63
			Object[+1].Value7=Object[+1].Value6
			Object[+1].Value7 -= 0x680000
			Object.Value6=-16
		end if
		Object[+2].Value7=1
		Object[+2].AnimationSpeed=0
		Object[+2].AnimationTimer=0
		break
	case 7
		Object.State=56
		Object[+2].Value1=60
		Object.Value6=0
		break
	case 8
		if Object.XPos<Object[+3].XPos
			Object.State=64
			Object[+1].Value7=Object[+1].Value6
			Object[+1].Value7 += 0x680000
			Object.Value6=16
		else
			Object.State=63
			Object[+1].Value7=Object[+1].Value6
			Object[+1].Value7 -= 0x680000
			Object.Value6=-16
		end if
		Object[+2].AnimationTimer=0
		break
	case 9
		Object.State=56
		Object[+2].Value1=60
		Object.Value6=0
		Object[+2].Value7=0
		Object[+2].AnimationTimer=0
		break
	case 10
		Object.State=59
		Object.Value6=-64
		Object[+1].Value7=Object[+3].YPos
		Object[+1].Value7 -= 0x240000
		break
	case 11
		Object.State=56
		Object[+2].Value1=90
		break
	case 12
		if Object.Direction == FACING_RIGHT
			Object.State=57
		else
			Object.State=58
		end if
		break
	case 13
		if Object.Direction == FACING_RIGHT
			Object.State=58
		else
			Object.State=57
		end if
		break
	case 14
		if Object.Direction == FACING_RIGHT
			Object.State=61
		else
			Object.State=62
		end if
		break
	case 15
		Object.State=65
		Object[+2].Value0=0
		Object[+2].State=1
		break
	case 16
		Object.State=66
		Object[+2].Value2=0
		Object[+2].Value3=Player.XPos
		Object[+2].Value3 >>= 16
		Object[+2].Value3&=3
		Object[+2].Value3 <<= 2
		Object[-4].Type=TypeName[BlankObject]
		Object[-3].Type=TypeName[BlankObject]
		Object[-2].Type=TypeName[BlankObject]
		Object[-1].Type=TypeName[BlankObject]
		Object[+2].State=1
		break
	case 17
		Object.State=68
		Object[+2].State=1
		break
	case 18
		CallFunction(EggMobile_Function70)
		Object.State=70
		Object.Value6=-64
		Object[+2].State=0
		break
	case 19
		Object.State=71
		break
	case 20
		Object.State=72
		break
	case 21
		CallFunction(EggMobile_Function70)
		Object.State=70
		Object.Value6=-64
		break
	case 22
		Object.State=71
		break
	case 23
		Object.State=72
		break
	end switch
	if Object[+1].Value2<23
		Object[+1].Value2++
	else
		Object[+1].Value2=1
	end if
	Object[+1].Value3=1
endfunction


function EggMobile_Function81
	switch Object[+1].Value2
	case 0
		Object.State=58
		Object.Value6=-80
		Object.Value1=0x18000
		Object[+2].State=1
		break
	case 1
		Object.State=57
		break
	case 2
		Object.State=62
		break
	case 3
		if Player.XPos>Object.XPos
			Object.State=57
			Object.Direction=FACING_LEFT
		else
			Object.State=58
			Object.Direction=FACING_RIGHT
		end if
		break
	case 4
		Object.Value3 /= 160
		Object.Value3 *= 160
		Object.State=60
		Object.Value2=0xC000
		Object[+1].Value7=Object[+3].YPos
		Object[+1].Value7 += 0x200000
		Object[+2].State=0
		TempValue0=4
		ArrayPos0=Object.EntityNo
		ArrayPos0 -= 4
		while TempValue0>0
			if Object[ArrayPos0].Value5 == 0
				Object[+2].Value4=TempValue0
				if Object.Direction == FACING_LEFT
					Object[+2].Value4 += 3
				else
					Object[+2].Value4++
				end if
				Object[+2].Value4 *= 20
				Object[+2].Value4%=80
				TempValue0=0
			end if
			ArrayPos0++
			TempValue0--
		loop
		break
	case 5
		Object.State=56
		Object[+2].Value1=20
		break
	case 6
		if Object.XPos<Object[+3].XPos
			Object.State=64
			Object[+1].Value7=Object[+3].XPos
			Object[+1].Value7 -= 0x140000
			Object.Value6=16
		else
			Object.State=63
			Object[+1].Value7=Object[+3].XPos
			Object[+1].Value7 += 0x140000
			Object.Value6=-16
		end if
		Object[+2].Value7=1
		Object[+2].AnimationSpeed=0
		Object[+2].AnimationTimer=0
		break
	case 7
		Object.State=56
		Object[+2].Value1=60
		Object.Value6=0
		break
	case 8
		if Object.XPos<Object[+1].Value6
			Object.Direction=FACING_LEFT
			Object.State=63
			Object[+1].Value7=Object[+1].Value4
			Object.Value6=-16
		else
			Object.Direction=FACING_RIGHT
			Object.State=64
			Object[+1].Value7=Object[+1].Value5
			Object.Value6=16
		end if
		Object[+2].AnimationTimer=0
		break
	case 9
		Object.State=56
		Object[+2].Value1=60
		Object.Value6=0
		Object[+2].Value7=2
		Object[+2].AnimationTimer=0
		break
	case 10
		Object.State=59
		Object.Value6=-80
		Object[+1].Value7=Object[+3].YPos
		Object[+1].Value7 -= 0x240000
		break
	case 11
		Object.State=56
		Object[+2].Value1=90
		break
	case 12
		if Object.Direction == FACING_RIGHT
			Object.State=57
		else
			Object.State=58
		end if
		break
	case 13
		if Object.Direction == FACING_RIGHT
			Object.State=58
		else
			Object.State=57
		end if
		break
	case 14
		if Object.Direction == FACING_RIGHT
			Object.State=61
		else
			Object.State=62
		end if
		break
	case 15
		Object.State=65
		Object[+2].Value0=0
		Object[+2].State=1
		break
	case 16
		Object.State=66
		Object[+2].Value2=0
		Object[+2].Value3=Player.XPos
		Object[+2].Value3 >>= 16
		Object[+2].Value3&=3
		Object[+2].Value3 <<= 2
		Object[-4].Type=TypeName[BlankObject]
		Object[-3].Type=TypeName[BlankObject]
		Object[-2].Type=TypeName[BlankObject]
		Object[-1].Type=TypeName[BlankObject]
		Object[+2].State=1
		break
	case 17
		Object.State=68
		Object[+2].State=1
		break
	case 18
		CallFunction(EggMobile_Function70)
		Object.State=70
		Object.Value6=-64
		Object[+2].State=0
		break
	case 19
		Object.State=71
		break
	case 20
		Object.State=72
		break
	case 21
		CallFunction(EggMobile_Function70)
		Object.State=70
		Object.Value6=-64
		break
	case 22
		Object.State=71
		break
	case 23
		Object.State=72
		break
	end switch
	if Object[+1].Value2<23
		Object[+1].Value2++
	else
		Object[+1].Value2=0
	end if
	Object[+1].Value3=1
endfunction


function EggMobile_Function82
	switch Object[+1].Value2
	case 0
		Object.State=58
		Object.Value6=-106
		Object.Value1=106496
		Object[+2].State=1
		break
	case 1
		Object.State=57
		break
	case 2
		Object.State=62
		break
	case 3
		Object.State=65
		Object[+2].Value0=0
		break
	case 4
		Object.State=66
		Object[+2].Value2=0
		Object[+2].Value3=Player.XPos
		Object[+2].Value3 >>= 16
		Object[+2].Value3&=3
		Object[+2].Value3 <<= 2
		Object[-4].Type=TypeName[BlankObject]
		Object[-3].Type=TypeName[BlankObject]
		Object[-2].Type=TypeName[BlankObject]
		Object[-1].Type=TypeName[BlankObject]
		Object[+2].State=1
		break
	case 5
		Object.State=68
		Object[+2].State=1
		break
	case 6
		CallFunction(EggMobile_Function70)
		Object.State=70
		Object.Value6=-64
		Object[+2].State=0
		break
	case 7
		Object.State=71
		break
	case 8
		Object.State=72
		break
	case 9
		CallFunction(EggMobile_Function70)
		Object.State=70
		Object.Value6=-64
		break
	case 10
		Object.State=71
		break
	case 11
		Object.State=72
		break
	end switch
	if Object[+1].Value2<11
		Object[+1].Value2++
	else
		Object[+1].Value2=0
	end if
	Object[+1].Value3=1
endfunction


function EggMobile_Function83
	switch Object[+1].Value2
	case 0
		Object.State=58
		Object.Value6=-160
		Object.Value1=106496
		Object[+2].State=1
		break
	case 1
		Object.State=57
		break
	case 2
		Object.State=62
		break
	case 3
		Object.State=65
		Object[+2].Value0=4
		Object.Value3 >>= 6
		Object.Value3 <<= 6
		Object.Value0=0
		Object[+1].Value7=Object[+3].YPos
		Object[+1].Value7 -= 4456448
		break
	case 4
		Object.State=67
		Object[+2].Value2=0
		Object[-4].Type=TypeName[BlankObject]
		Object[-3].Type=TypeName[BlankObject]
		Object[-2].Type=TypeName[BlankObject]
		Object[-1].Type=TypeName[BlankObject]
		Object.Value0=0
		Object.Value4=0
		break
	case 5
		Object.State=68
		break
	case 6
		Object.State=58
		Object.Value6=-160
		break
	case 7
		Object.State=57
		break
	case 8
		Object.State=62
		break
	case 9
		if Player.XPos>Object.XPos
			Object.State=57
			Object.Direction=FACING_LEFT
		else
			Object.State=58
			Object.Direction=FACING_RIGHT
		end if
		break
	case 10
		Object.State=74
		break
	case 11
		Object.State=76
		Object[+2].State=0
		break
	case 12
		if Object.Direction == FACING_RIGHT
			Object.State=77
			Object[+1].Value7=Object.XPos
			Object[+1].Value7 -= 2686976
		else
			Object.State=78
			Object[+1].Value7=Object.XPos
			Object[+1].Value7 += 2686976
		end if
		break
	case 13
		if Object.Direction == FACING_RIGHT
			Object.State=77
			Object[+1].Value7 -= 5373952
		else
			Object.State=78
			Object[+1].Value7 += 5373952
		end if
		break
	case 14
		if Object.Direction == FACING_RIGHT
			Object.State=77
			Object[+1].Value7 -= 5373952
		else
			Object.State=78
			Object[+1].Value7 += 5373952
		end if
		break
	case 15
		if Object.Direction == FACING_RIGHT
			Object.State=78
		else
			Object.State=77
		end if
		break
	case 16
		if Object.Direction == FACING_RIGHT
			Object.State=78
			Object[+1].Value7 += 5373952
		else
			Object.State=77
			Object[+1].Value7 -= 5373952
		end if
		break
	case 17
		if Object.Direction == FACING_RIGHT
			Object.State=78
			Object[+1].Value7 += 5373952
		else
			Object.State=77
			Object[+1].Value7 -= 5373952
		end if
		break
	case 18
		Object.State=75
		break
	end switch
	if Object[+1].Value2<18
		Object[+1].Value2++
	else
		Object[+1].Value2=0
	end if
	Object[+1].Value3=1
endfunction


function EggMobile_Function84
	switch Object[+2].Value0
	case 0
		Object.Value0++
		if Object.Value0 == 90
			Object.Value0=0
			Object.Value1=0x14000
			Object[+1].Value7=Object.YPos
			Player.ControlMode=-1
			Player.JumpHold=0
			Player.Right=1
			Player.Left=0
			Player.Up=0
			Player.Down=0
			Object[+2].Value0++
			if Stage.PlayerListPos == 0
				if Stage.DebugMode == 0
					SetAchievement(9,100)
				end if
			end if
		end if
		break
	case 1
		Object.XPos += Object.Value1
		Sin(Object.YPos,Object.Value0)
		Object.YPos <<= 9
		Object.YPos += Object[+1].Value7
		Object[+1].Value7 += 0x4000
		Object.Value0 += 4
		Object.Value0&=511
		TempValue0=Object[+1].Value5
		TempValue0 += 0x800000
		if Object.XPos>TempValue0
			Object.Value0=0
			Object[+4].Type=TypeName[AmyRose]
			Object[+2].Value0++
		end if
		if Player.Right == 1
			TempValue0=Player.CollisionRight
			TempValue0 <<= 16
			TempValue0 += Player.XPos
			TempValue1=Object[+2].Value6
			TempValue1 <<= 16
			if TempValue0>TempValue1
				Player.Left=1
				Player.Right=0
			end if
		else
			TempValue0=Object[+1].Value6
			TempValue0 += 0x400000
			if Player.XPos<TempValue0
				Player.XPos=TempValue0
				Player.Speed=0
				Player.Left=0
			end if
		end if
		break
	case 2
		TempValue0=Object[+1].Value6
		TempValue0 += 0x400000
		if Player.XPos<TempValue0
			Player.XPos=TempValue0
			Player.Speed=0
			Player.Left=0
		end if
		break
	end switch
	TempValue0=Object.AnimationTimer
	TempValue0&=1
	if TempValue0 == 0
		if Object[+2].Value0>0
			Screen.ShakeY=2
		end if
		Rand(TempValue0,300)
		TempValue0 -= 150
		TempValue0 <<= 16
		TempValue0 += Object[+3].XPos
		Rand(TempValue1,200)
		TempValue1 -= 100
		TempValue1 <<= 16
		TempValue1 += Object[+3].YPos
		CreateTempObject(TypeName[Explosion],0,TempValue0,TempValue1)
		if Object.AnimationTimer == 0
			if Object[+5].Type == TypeName[BlankObject]
				PlaySfx(22,0)
			end if
		end if
	end if
	Object.AnimationTimer++
	Object.AnimationTimer&=7
endfunction


function EggMobile_Function85
	switch Object[+2].Value0
	case 0
		Object.Value0++
		if Object.Value0 == 30
			Object.Value0=0
			Object.Value1=0x20000
			Object[+1].Value7=Object.YPos
			Object[+2].Value0++
		end if
		break
	case 1
		Object.XPos += Object.Value1
		Sin(Object.YPos,Object.Value0)
		Object.YPos <<= 9
		Object.YPos += Object[+1].Value7
		Object[+1].Value7 += 0x4000
		Object.Value0 += 4
		Object.Value0&=511
		TempValue0=Object[+1].Value5
		TempValue0 += 0x580000
		if Object.XPos>TempValue0
			Object[+2].Value0++
			Object.Value0=0
			Object[+2].Value6 += 64
			Player.ControlMode=-1
			Player.JumpHold=0
			Player.Right=1
			Player.Left=0
			Player.Up=0
			Player.Down=0
		end if
		break
	case 2
		Player.Right=1
		Object.Value0++
		if Object.Value0 == 120
			Object[+5].Type=TypeName[FadeScreen]
			Object[+5].PropertyValue=1
		end if
		break
	end switch
	TempValue0=Object.AnimationTimer
	TempValue0&=3
	if TempValue0 == 0
		Rand(TempValue0,64)
		TempValue0 -= 32
		TempValue0 <<= 16
		TempValue0 += Object.XPos
		Rand(TempValue1,64)
		TempValue1 -= 32
		TempValue1 <<= 16
		TempValue1 += Object.YPos
		CreateTempObject(TypeName[Explosion],0,TempValue0,TempValue1)
		if Object.AnimationTimer == 0
			if Object[+5].Type == TypeName[BlankObject]
				PlaySfx(22,0)
			end if
		end if
	end if
	Object.AnimationTimer++
	Object.AnimationTimer&=7
endfunction


function EggMobile_Function86
	ArrayPos0=Object.EntityNo
	ArrayPos0 -= 4
	TempValue0=0
	TempValue1=Object.Rotation
	while TempValue0<4
		if Object[ArrayPos0].Value5 == 1
			Object[ArrayPos0].Rotation=TempValue1
			Sin(Object[ArrayPos0].XPos,TempValue1)
			Object[ArrayPos0].XPos *= Object.Value4
			Object[ArrayPos0].XPos&=-0x10000
			Object[ArrayPos0].XPos += Object.XPos
			Cos(Object[ArrayPos0].YPos,TempValue1)
			TempValue2=Object.Value4
			FlipSign(TempValue2)
			Object[ArrayPos0].YPos *= TempValue2
			Object[ArrayPos0].YPos&=-0x10000
			Object[ArrayPos0].YPos += Object.YPos
		end if
		TempValue1 += 128
		TempValue1&=511
		ArrayPos0++
		TempValue0++
	loop
endfunction


function EggMobile_Function87
	TempValue6=Object[ArrayPos0].XPos
	TempValue6 -= Object.XPos
	TempValue6 -= 0x180000
	if TempValue0<0
		FlipSign(TempValue6)
	end if
	TempValue7=Object[ArrayPos0].YPos
	TempValue7 -= Object.YPos
	TempValue7 -= 4456448
	if TempValue7<0
		FlipSign(TempValue7)
	end if
	TempValue6 += TempValue7
	TempValue6 >>= 16
endfunction


function BossWing_Function87
	TempValue0=Object[+1].AnimationTimer
	TempValue0 >>= 2
	TempValue0&=1
	if TempValue0 == 1
		TempValue0=Object[+1].AnimationTimer
		TempValue0 >>= 3
		TempValue0 += 11
		DrawSprite(TempValue0)
		TempValue0 += 5
		DrawSprite(TempValue0)
		TempValue0 += 5
		DrawSprite(TempValue0)
		TempValue0 += 5
		DrawSprite(TempValue0)
		TempValue0 += 5
		DrawSprite(TempValue0)
		TempValue0 += 5
		DrawSprite(TempValue0)
		TempValue0 += 5
		DrawSprite(TempValue0)
	end if
	Object[+1].AnimationTimer++
	Object[+1].AnimationTimer%=40
endfunction


function EggMobile_Function56
	if Object.Value7 == 0
		TempValue0=1
	else
		TempValue1=Player.XPos
		TempValue1 >>= 16
		TempValue1&=0x7FF8
		CheckLower(TempValue1,Object.Value5)
		TempValue0=CheckResult
		CheckGreater(TempValue1,Object.Value6)
		TempValue0|=CheckResult
	end if
	if TempValue0 == 1
		TempValue2=Oscillation
		TempValue2&=127
		TempValue2 += Object.Value3
		TempValue2 -= 64
		TempValue3=Player.XPos
		TempValue3 >>= 16
		TempValue3 *= 5
		TempValue3&=31
		TempValue3 += Object.Value4
	else
		TempValue2=TempValue1
		TempValue3=Object.Value4
		TempValue3 -= 8
	end if
	Object.Value1=TempValue2
	Object.Value1 -= Object.iXPos
	Object.Value1 <<= 12
	Object.Value2=TempValue3
	Object.Value2 -= Object.iYPos
	Object.Value2 <<= 12
	Object.Value7++
	Object.Value7&=1
endfunction


sub ObjectMain
	if game.playMode == BOOT_PLAYMODE_BOSSRUSH
		Object.Type=TypeName[BlankObject]
	else
		if Object.PropertyValue == 0
			switch Object.State
			case 0
				TempValue0=Object.XPos
				TempValue0 -= 0x300000
				if Player.XPos>TempValue0
					Object.State++
				end if
				break
			case 1
				if Object.Value0<60
					Object.Value0++
				else
					Object.Value0=0
					Object[+1].Type=TypeName[Hotaru2]
					Object[+1].XPos=Object.XPos
					Object[+1].XPos -= 0x500000
					Object[+1].YPos=Object.YPos
					Object[+1].YPos += 0x300000
					Object.State++
				end if
				break
			case 2
				if Object[+1].Type!=TypeName[Hotaru2]
					Object.State++
				else
					if Object[+1].State<2
						TempValue0=176
					else
						TempValue0=0
					end if
					TempValue0 -= Object.Alpha
					TempValue0 >>= 3
					Object.Alpha += TempValue0
				end if
				break
			case 3
				if Object.Value0<60
					Object.Value0++
				else
					Object.Value0=0
					Object[+2].Type=TypeName[Hotaru2]
					Object[+2].Value7=1
					Object[+2].XPos=Object.XPos
					Object[+2].XPos -= 0x500000
					Object[+2].YPos=Object.YPos
					Object[+2].YPos += 0x280000
					Object[+3].Type=TypeName[Hotaru2]
					Object[+3].Value7=0
					Object[+3].XPos=Object.XPos
					Object[+3].XPos += 0x500000
					Object[+3].YPos=Object.YPos
					Object[+3].YPos += 0x280000
					Object.State++
				end if
				break
			case 4
				if Object[+2].Type!=TypeName[Hotaru]
					if Object[+3].Type!=TypeName[Hotaru]
						ResetObjectEntity(Object.EntityNo,TypeName[BlankObject],0,0,0)
					else
						if Object[+3].State<2
							TempValue0=176
						else
							TempValue0=0
						end if
						TempValue0 -= Object.Alpha
						TempValue0 >>= 3
						Object.Alpha += TempValue0
					end if
				else
					if Object[+2].State<2
						TempValue0=176
					else
						TempValue0=0
					end if
					TempValue0 -= Object.Alpha
					TempValue0 >>= 3
					Object.Alpha += TempValue0
				end if
				break
			case 5
				if Object[+2].State>1
					if Object[+3].State>1
						Object[+5].State=1
					end if
				end if
				if Object[24].PropertyValue == 3
					if Object.Alpha<176
						Object.Alpha++
					end if
				else
					if Object.Alpha>0
						Object.Alpha--
					end if
				end if
				PlayerObjectCollision(C_TOUCH,-192,-256,420,256)
				if CheckResult == 0
					ResetObjectEntity(Object.EntityNo,TypeName[BlankObject],0,0,0)
				end if
				break
			end switch
		else
			switch Object.State
			case 0
				if Object.Value0<30
					Object.Value0++
				else
					Object.Value0=16
					CallFunction(EggMobile_Function56)
					Object.State++
				end if
				Object.Alpha=Object.Value0
				Object.Alpha <<= 2
				break
			case 1
				Object.XPos += Object.Value1
				Object.YPos += Object.Value2
				TempValue0=Object.Value0
				TempValue0&=1
				if TempValue0 == 0
					CreateTempObject(TypeName[HotaruTrail],0,Object.XPos,Object.YPos)
					Object[TempObjectPos].InkEffect=2
					Object[TempObjectPos].Alpha=248
				end if
				Object.Value0--
				if Object.Value0 == 0
					Object.State++
				end if
				break
			case 2
				Object.Value0++
				if Object.Value0 == 16
					Object.Value0=0
					Object.State++
					PlayStageSfx(4,0)
				end if
				break
			case 3
				TempValue0=Object.Value0
				TempValue0&=1
				if TempValue0 == 0
					CreateTempObject(TypeName[BlankObject],0,Object.XPos,Object.YPos)
					Object[TempObjectPos].Value2=Object.EntityNo
				end if
				Object.Value0++
				if Object.Value0 == 10
					Object.Value0=0
					Object.State++
				end if
				break
			case 4
				Object.Value0++
				if Object.Value0 == 8
					Object.Value0=16
					CallFunction(EggMobile_Function56)
					Object.State=1
				end if
				break
			end switch
		end if
	end if
end sub


sub ObjectPlayerInteraction
	if Object.PropertyValue == 1
		if Object.State == 3
			if Object.Value0>1
				PlayerObjectCollision(C_TOUCH,-5,-5,5,5)
				if CheckResult == 1
					CallFunction(Player_BadnikBreak)
				end if
			end if
		end if
	end if
end sub


sub ObjectDraw
	if Object.PropertyValue == 1
		switch Object.State
		case 0
			DrawSpriteFX(2,FX_INK,Object.XPos,Object.YPos)
			break
		case 1
			DrawSprite(2)
			break
		case 2
			TempValue0=Object.Value0
			TempValue0&=3
			TempValue0 >>= 1
			if TempValue0 == 0
				DrawSprite(3)
			else
				DrawSprite(0)
			end if
			break
		case 3
			TempValue0=Object.Value0
			TempValue0&=7
			TempValue0 >>= 2
			DrawSprite(TempValue0)
			DrawSprite(3)
			break
		case 4
			TempValue0=Object.Value0
			TempValue0&=3
			TempValue0 >>= 1
			if TempValue0 == 0
				DrawSprite(3)
			else
				DrawSprite(0)
			end if
			break
		end switch
	end if
end sub


sub ObjectStartup
	LoadSpriteSheet("R8/Objects3.gif")
	SpriteFrame(-12,-24,24,40,96,133)
	SpriteFrame(-12,-24,24,40,121,133)
	SpriteFrame(-12,-10,24,24,146,133)
	SpriteFrame(-12,-10,24,24,171,133)
	ArrayPos0=32
	while ArrayPos0<1056
		if Object[ArrayPos0].Type == TypeName[Hotaru]
			Object[ArrayPos0].Type=TypeName[Hotaru2]
		end if
		if Object[ArrayPos0].Type == TypeName[Hotaru2]
			Object[ArrayPos0].Alpha=0
			Object[ArrayPos0].InkEffect=2
			if Object[24].PropertyValue == 3
				Object[ArrayPos0].DrawOrder=2
			end if
			ArrayPos1=ArrayPos0
			ArrayPos1++
			TempValue0=0
			while TempValue0<3
				Object[ArrayPos1].PropertyValue=1
				Object[ArrayPos1].DrawOrder=4
				Object[ArrayPos1].InkEffect=2
				Object[ArrayPos1].Value3=Object[ArrayPos0].iXPos
				Object[ArrayPos1].Value4=Object[ArrayPos0].iYPos
				Object[ArrayPos1].Value5=Object[ArrayPos0].iXPos
				Object[ArrayPos1].Value5 -= 112
				Object[ArrayPos1].Value6=Object[ArrayPos0].iXPos
				Object[ArrayPos1].Value6 += 112
				TempValue0++
				ArrayPos1++
			loop
			ArrayPos0 += 3
		end if
		ArrayPos0++
	loop
end sub


// ========================
// Editor Subs
// ========================

sub RSDKDraw
	DrawSprite(0)
end sub


sub RSDKLoad
	LoadSpriteSheet("Global/Display.gif")
	SpriteFrame(-16, -16, 32, 32, 1, 143)		// #0 - "Script" Icon
	
	SetVariableAlias(ALIAS_VAR_PROPVAL, "unused")
end sub


